--textdomain wesnoth-nr

Scenario{
    id: "10a_Stolen_Gold"
    name: _ "Stolen Gold"
    map: "campaigns/Northern_Rebirth/maps/10a_Stolen_Gold.map"
    turns: 36
    next_scenario: "11a_The_Eastern_Flank"
    victory_when_enemies_defeated: true

    <DEFAULT_SCHEDULE!

    <INTRO_AND_SCENARIO_MUSIC("the_king_is_dead.ogg", "northerners.ogg")
    <EXTRA_SCENARIO_MUSIC("frantic.ogg")
    <EXTRA_SCENARIO_MUSIC("casualties_of_war.ogg")
    <EXTRA_SCENARIO_MUSIC("knolls.ogg")

-- Story with few branches depending on whether Eryssa is alive and hostile
-- towards the Alliance.
-- wmllint: recognize Eryssa
-- wmllint: local spelling priss
    story: {
        part: {
            story: _ "Puzzled by the presence of trolls so close to the dwarvish defenses, the party quickly made their way back to Knalga."
            <NR_BIGMAP!
            <RECOVERY_STAGE3!
            music: "sad.ogg"
        }
        part: {
            story: _ "Upon arriving there something seemed to be wrong. Instead of being hailed boisterously by the Dwarves as they usually were, they were met by silent guards with downcast eyes."
        }
        part: {
            story: _ "Fearing the worst, Tallin rushed to find Hamel who also couldn’t bear to meet his eyes."
        }

        <STORY_PART_TALLIN(_ "Hamel, what is wrong?! Why is everyone acting so strangely?")

        <STORY_PART_HAMEL(_ "We are deeply ashamed of ourselves, Tallin. We ha’ failed the trust that ye gave us.")

        <STORY_PART_TALLIN(_ "What do you mean?")

        <STORY_PART_HAMEL(_ "Yer gold, Tallin, we ha’ failed to protect it.")

        <STORY_PART_TALLIN(_ "My gold!? Why, what happened? Start from the beginning.")

        <STORY_PART_HAMEL(_ "No sooner had ye left then the orcs once again launched a massive assault.")

        <STORY_PART_HAMEL(_ "Such a massive and fierce assault it was that we had to call upon all our reserves. When that proved insufficient, we had nae other choice then to call some men off the other defenses.")

        <STORY_PART_HAMEL(_ "It was a ploy. Nae sooner than we ha’ thinned the ranks of the northern defenders, a small, hardened group of trolls smashed through the defenses and made their way straight for your gold.")

        <STORY_PART_HAMEL(_ "We beat them back, but not before they made off with your entire stock of gold.")

        <STORY_PART_HAMEL(_ "I am sorry, Tallin, we did all that we could. I would we could ha’ done more.")

        <STORY_PART_TALLIN(_ "Oh no! Rakshas will raise many troops with that gold!")

        <STORY_PART_HAMEL(_ "Aye. Well I ken it, Tallin.")

        if: {
            variable: {
                name: "eryssa_hostile"
                equals: true
            }
            then: ->
                STORY_PART_ERYSSA(_ "See, you wretched human! At least now you will appreciate the generosity of the elves.")

                STORY_PART_ARTHIAN(_ "Shut up, you little snot! If it wasn’t for you we wouldn’t have lost our gold in the first place!")

                STORY_PART_ERYSSA(_ "I wasn’t talking to you, lich! Learn to keep your mouth shut.")

                STORY_PART_HAMEL(_ "Who is this annoying chit?")

                STORY_PART_TALLIN(_ "This is the famous and benevolent princess Eryssa, in whose rescue we sacrificed many lives and <i>much</i> gold.")

                STORY_PART_ERYSSA(_ "That’s it! I have had enough from you worthless rabble. I will soon send a rider with the promised gold, and in the meantime, I’m leaving!")

                STORY_PART_ARTHIAN(_ "Begone and good riddance, brat!")

                STORY_PART_TALLIN(_ "Back to the issue of the stolen gold, were you able to pursue the trolls?")
            
            elseif: {
                variable: {
                    name: "eryssa_hostile"
                    equals: false
                }
                then: ->
                    STORY_PART_TALLIN(_ "Were you able to pursue them?")
                
                else: ->
-- Eryssa dead

                    STORY_PART_TALLIN(_ "This isn’t looking good. Not only do we fail to get the princess but now we lost all of our gold! Seriously Hamel, I don’t know if we’re gonna make it.")

                    STORY_PART_HAMEL(_ "Don’t give in to despair, Tallin. At least you prevented the orcs from getting the ransom money.")

                    STORY_PART_TALLIN(_ "Yeah, they ran off with all the rest of our gold instead.")

                    STORY_PART_HAMEL(_ "Snap out of it Tallin! We are not in control of fate. We will do all we can to the best of our ability and leave the results to the gods.")

                    STORY_PART_TALLIN(_ "You’re right, Hamel, sorry. Were you able to pursue the trolls?")
                
            }
        }

        <STORY_PART_HAMEL(_ "Och, we tried, Tallin, but with the orcs still pressing our southern defenses and other groups of trolls trying to break through everywhere, we simply ha’ not the manpower.")

        <STORY_PART_TALLIN(_ "How long ago did the trolls make off with the gold?")

        <STORY_PART_HAMEL(_ "It couldna’ ha’ been more than a day now.")

        <STORY_PART_TALLIN(_ "Then we shall pursue them. Even if we don’t catch them then we might be able to hit Rakshas before he has had a chance to put all that gold to good use.")

        <STORY_PART_TALLIN(_ "Hamel, rally the dwarves and prepare to make an all-out offensive against the orcs. It’s time to give them some of their own.")

        <STORY_PART_TALLIN(_ "We will follow the trail of the trolls; it should lead us back to Rakshas.")

        if: {
            variable: {
                name: "eryssa_hostile"
                equals: false
            }
            then: ->
                STORY_PART_TALLIN(_ "Eryssa, what news of the elves?")

                STORY_PART_ERYSSA(_ "Our gryphons have reached them. They are no more than a few days march from us.")

                STORY_PART_ERYSSA(_ "I will send another message to them asking them to send out scouts to locate the trolls who took your gold. Mayhap the elves will be able to get between the trolls and their allies.")
            
            else: ->
                STORY_PART_HAMEL(_ "It is well thought. May the Bright Gods be with you.")
            
        }

        <STORY_PART_TALLIN(_ "So it shall be. Hamel, when I make contact with the orcs I’ll send you a message. When you get it, come at all speed. It is near time for the battle that will decide all.")

        <STORY_PART_HAMEL(_ "The axes and hammers o’ every dwarf thirst for the blood of the orcs!")

        <STORY_PART_TALLIN(_ "All right, let’s move out, people!")

        part: {
            story: _ "Thus the party set off to the northern tunnels to pursue the trolls."
        }
        part: {
            story: _ "They met but light resistance all along the trail of the trolls, which they quickly overcame."
        }
        part: {
            story: _ "Soon, the trail began to lead east, and then south. A few hours later the party emerged from the tunnels into dawn’s early light."
        }
    }

    <NR_TRACK(RECOVERY_STAGE4!)

-- Players side
-- wmllint: validate-off
    side: {
        side: 1
        controller: "human"
        recruit: {"Peasant", "Woodsman", "Thug", "Poacher", "Spearman", "Bowman", "Gryphon", "Dwarvish Fighter", "Dwarvish Thunderer", "Dwarvish Ulfserker", "Dwarvish Scout", "Footpad"}
        gold: 200
        team_name: "alliance"
        user_team_name: _ "Alliance"

-- wmllint: recognize Tallin
        <CHARACTER_STATS_TALLIN!
    }
-- wmllint: validate-on

-- Opposing AIs, pretty developed [ai] tag causes them to act stupid,
-- aggressive, ignore villages, and target Tallin
    SG_STUPID_TROLL_AI: () -> {
        ai: {
            simple_targeting: true
            aggression: 1.0
            caution: -5.0
            attack_depth: 5
            village_value: 0.0
            leader_value: 50.0
            villages_per_scout: 0.0
            recruitment_pattern: {"fighter", "fighter", "mixed fighter"}

            goal: {
                name: "target"
                criteria: {
                    id: "Tallin"
                }
                value: 500
            }
        }
    }

-- Troll sides
    side: {
        side: 2
        controller: "ai"
        recruit: {"Troll Whelp", "Troll", "Troll Rocklobber"}
        <GOLD(600, 700, 800)
        <INCOME(10, 20, 25)
        team_name: "trolls"
        user_team_name: _ "Trolls"

        type: "Troll Warrior"
        id: "Tor"
        name: _ "Tor"
        canrecruit: true

        <SG_STUPID_TROLL_AI!
    }

    side: {
        side: 3
        controller: "ai"
        recruit: {"Troll Whelp", "Troll", "Troll Rocklobber"}
        <GOLD(600, 700, 800)
        <INCOME(10, 20, 25)

        team_name: "trolls"
        user_team_name: _ "Trolls"

        type: "Troll Warrior"
        id: "Bor"
        name: _ "Bor"
        canrecruit: true

        <SG_STUPID_TROLL_AI!
    }

    side: {
        side: 4
        controller: "ai"
        recruit: {"Troll Whelp", "Troll", "Troll Rocklobber"}
        <GOLD(600, 700, 800)
        <INCOME(10, 20, 25)
        team_name: "trolls"
        user_team_name: _ "Trolls"

        type: "Troll Warrior"
        id: "Oof"
        name: _ "Oof"
        canrecruit: true

        <SG_STUPID_TROLL_AI!
    }

    side: {
        side: 5
        controller: "ai"
        recruit: {"Troll Whelp", "Troll", "Troll Rocklobber"}
        <GOLD(600, 700, 800)
        <INCOME(10, 20, 25)
        team_name: "trolls"
        user_team_name: _ "Trolls"

        type: "Troll Warrior"
        id: "Glu"
        name: _ "Glu"
        canrecruit: true

        <SG_STUPID_TROLL_AI!
    }

-- Side for arriving elves, no leader, but gold and recruit list since Hindel can recruit
    side: {
        side: 6
        controller: "ai"
        recruit: {"Elvish Fighter", "Elvish Archer", "Elvish Shaman", "Elvish Scout"}
        <GOLD(250, 200, 150)
        team_name: "alliance"
        user_team_name: _ "Alliance"
        no_leader: true
        <FLAG_VARIANT("wood-elvish")
    }

-- Side for Krash, no leader but gold and recruit lits since Krash will be able to recruit
    side: {
        side: 7
        controller: "human"
        save_id: "Krash"
        recruit: {"Drake Fighter", "Drake Glider", "Drake Burner", "Drake Clasher"}
        <GOLD(250, 200, 150)
        team_name: "alliance"
        user_team_name: _ "Alliance"
        no_leader: true
    }

    <PLACE_IMAGE("scenery/dwarven-doors-closed.png", 18, 12)

    event: {
        name: "prestart"
        do: ->
            If{
                variable: {
                    name: "eryssa_hostile"
                    equals: true
                }

                then: ->
                    Kill{
                        id: "Eryssa"
                        fire_event: false
                    }
                
            }

            RECALL_SUPPORTER!

            Recall{
                id: "Abhai"
            }

            Recall{
                id: "Camerin"
            }

            Recall{
                id: "Father Morvin"
            }

            Recall{
                id: "Sister Thera"
            }

            Recall{
                id: "Krash"
            }

            Recall{
                id: "Elenia"
            }

            Recall{
                id: "Eryssa"
            }

            Recall{
                id: "Stalrag"
            }

            Recall{
                id: "Ro'Arthian"
            }

            Recall{
                id: "Ro'Sothian"
            }
    }

    event: {
        name: "start"
        do: ->
            Message{
                speaker: "narrator"
                image: "wesnoth-icon.png"
                message: _ "Upon emerging from the tunnels, the party found themselves surrounded."
            }

            Message{
                speaker: "Tor"
                message: _ "Haha, suckers! We got you now!"
            }

            Message{
                speaker: "Bor"
                message: _ "Hahaha! They walked right into our trap."
            }

            Message{
                speaker: "Glu"
                message: _ "And we have already sent the gold ahead to the Master!"
            }

            Message{
                speaker: "Oof"
                message: _ "Now let’s make mush out of these puny creatures!"
            }

            Message{
                role: "Supporter"
                message: _ "Oh no, we are surrounded!"
            }

            Message{
                speaker: "Tallin"
-- po: This is an approximate quote from an Anglo-Saxon heroic poem
-- po: the Lay of Beorthnoth. Tranlate appropriately.
                message: _ "Courage shall be the harder, heart the keener, and our spirit greater as our strength lessens. Kill them all!"
            }

            Message{
                speaker: "Camerin"
-- wmllint: local spelling Yeeahhh
                message: _ "Yeeahhh! I like it!"
            }

            Objectives{
                side: 1
                objective: {
                    description: _ "Resist for as long as you can"
                    condition: "win"
                    show_turn_counter: true
                }
                <ALTERNATIVE_OBJECTIVE_BONUS(_ "Defeat the enemy leaders")
                objective: {
                    description: _ "Death of Tallin"
                    condition: "lose"
                }
                objective: {
                    description: _ "Death of Ro’Arthian"
                    condition: "lose"
                }
                objective: {
                    description: _ "Death of Ro’Sothian"
                    condition: "lose"
                }

                gold_carryover: {
                    carryover_percentage: 40
                }
            }
    }

-- Turn 2 - Krash smells other drakes and leaves. If he's alive at this point.
    event: {
        name: "turn 2"
        filter_condition: {
            have_unit: {
                id: "Krash"
            }
        }
        do: ->
            Message{
                speaker: "Krash"
                message: _ "(<i>Sniff sniff</i>)"
            }

            Message{
                speaker: "Camerin"
                message: _ "What’s up big guy?"
            }

            Message{
                speaker: "Krash"
                message: _ "(<i>Flap flap flap</i>)"
            }

            Store_Unit{
                filter: {
                    id: "Krash"
                }
                variable: "krash_flies_away"
                kill: true
                fire_event: false
            }

            VARIABLE("krash_flies_away.side", 7)
            VARIABLE("krash_flies_away.x", 3)
            VARIABLE("krash_flies_away.y", 15)
            VARIABLE("krash_flies_away.canrecruit", true)

            Move_Unit_Fake{
                type: krash_flies_away.type
                side: 7
                x: {13, 12, 11, 10, 9, 8, 7, 6, 5, 4, 3, 2, 1}
                y: {15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15}
            }

            Message{
                role: "Supporter"
                message: _ "Hey! Where is he going?"
            }

            Message{
                speaker: "Camerin"
                message: _ "Krash man, you are gonna miss all the fun!"
            }

            Message{
                speaker: "Father Morvin"
                message: _ "I think he has decided that it is time for him to part ways with us."
            }

            Message{
                speaker: "Tallin"
                message: _ "Such a fierce yet gentle creature. He will be sorely missed."
            }

            Message{
                speaker: "Sister Thera"
                message: _ "Farewell, Krash, may the Lords of Light guide your path."
            }
    }

-- Turn 7 - Krash gets back. With friends. If he was alive earlier that is.
    event: {
        name: "turn 7"
        filter_condition: {
            variable: {
                name: "krash_flies_away.length"
                equals: 1
            }
        }
        do: ->
            Move_Unit_Fake{
                type: krash_flies_away.type
                side: 7
                x: {1, 2}
                y: {15, 14}
            }

            Unstore_Unit{
                variable: "krash_flies_away"
                find_vacant: true
            }

            CLEAR_VARIABLE("krash_flies_away")

-- Remove loyalty overlay
            Remove_Unit_Overlay{
                id: "Krash"
                image: "misc/loyal-icon.png"
            }

-- Give expendable overlay
            Unit_Overlay{
                id: "Krash"
                image: "misc/leader-expendable.png"
            }

            Move_Unit_Fake{
                type: "Drake Burner"
                side: 7
                x: {1, 2}
                y: {14, 13}
            }

            Unit{
                type: "Drake Burner"
                side: 7
                id: "Singe"
                name: _ "Singe"
                x: 3, y: 14
                modifications: {
                    <TRAIT_LOYAL!
                    <TRAIT_RESILIENT!
                }
                <IS_LOYAL!
            }

            Move_Unit_Fake{
                type: "Drake Fighter"
                side: 7
                x: {1, 2}
                y: {16, 15}
            }

            Unit{
                type: "Drake Fighter"
                id: "Bak'man"
                name: _ "Bak’man"
                side: 7
                x: 3, y: 15
                modifications: {
                    <TRAIT_LOYAL!
                    <TRAIT_STRONG!
                }
                <IS_LOYAL!
            }

            Message{
                speaker: "Sister Thera"
                message: _ "Hey! Look who’s back!"
            }

            Message{
                role: "Supporter"
                message: _ "And look, he brought his friends too!"
            }

            Message{
                speaker: "Bak'man"
                message: _ "GRRRR!" -- wmllint: no spellcheck
            }

            Message{
                speaker: "Singe"
                message: _ "ROOAARRR!!" -- wmllint: no spellcheck
            }

            Message{
                speaker: "Krash"
                message: _ "Hurry, friends, let’s set up camp!"
            }

            Message{
                speaker: "Camerin"
                message: _ "Yeah, man! I knew we could count on you!"
            }

            Message{
                speaker: "Father Morvin"
                message: _ "Hmmm, he must have smelled the scent of other drakes and gone to them to convince them to help us."
            }

            Message{
                speaker: "Sister Thera"
                message: _ "Awww, what a darling!"
            }

            Message{
                role: "Supporter"
                message: _ "Tell that to the trolls."
            }

            Message{
                speaker: "Oof"
                message: _ "What?! Drakes?! Fire! Aagghh!"
            }

            Message{
                speaker: "Glu"
                message: _ "Shut your mouth, you coward!"
            }

            Terrain{
                x: 3, y: 15
                terrain: "Ke"
            }

            Terrain{
                x: {3, 3, 2, 4, 4}
                y: {14, 16, 15, 15, 14}
                terrain: "Ce"
            }

            Objectives{
                side: 7
                objective: {
                    description: _ "Help Tallin defeat the enemy leaders or"
                    condition: "win"
                }
                objective: {
                    description: _ "Resist for as long as you can"
                    condition: "win"
                    show_turn_counter: true
                }
                objective: {
                    description: _ "Death of Tallin"
                    condition: "lose"
                }
                objective: {
                    description: _ "Death of Ro’Arthian"
                    condition: "lose"
                }
                objective: {
                    description: _ "Death of Ro’Sothian"
                    condition: "lose"
                }

                gold_carryover: {
                    carryover_percentage: 40
                }
            }
    }

-- Elven reinforcements or gold arrive.
    event: {
        name: "turn 18"
        filter_condition: {
            have_unit: {
                id: "Eryssa"
            }
        }
        do: ->
            Move_Unit_Fake{
                type: "Elvish Marshal"
                side: 6
                x: {30, 29, 28}
                y: {15, 15, 15}
            }

            Unit{
                id: "Hidel"
                type: "Elvish Marshal"
                name: _ "Hidel"
                profile: "portraits/Hidel.png"
                canrecruit: true
                x: 28
                y: 15
                side: 6
            }

            Move_Unit_Fake{
                type: "Elvish Fighter"
                side: 6
                x: {30, 29, 28}
                y: {14, 14, 14}
            }

            GENERIC_UNIT(6, "Elvish Fighter", 28, 14)

            Move_Unit_Fake{
                type: "Elvish Fighter"
                side: 6
                x: {30, 29, 28}
                y: {13, 13, 13}
            }

            GENERIC_UNIT(6, "Elvish Fighter", 28, 13)

            Move_Unit_Fake{
                type: "Elvish Archer"
                side: 6
                x: {30, 29, 28}
                y: {16, 16, 16}
            }

            GENERIC_UNIT(6, "Elvish Archer", 28, 16)

            Move_Unit_Fake{
                type: "Elvish Shaman"
                side: 6
                x: {30, 29}
                y: {15, 16}
            }

            GENERIC_UNIT(6, "Elvish Shaman", 29, 16)

            Message{
                speaker: "Hidel"
                message: _ "Princess! We have finally found you!"
            }

            Message{
                speaker: "Eryssa"
                message: _ "Good work, Hidel! How do your forces march?"
            }

            Message{
                speaker: "Hidel"
                message: _ "They are all here, princess! Hand picked by your father — the finest and bravest elvish troops in the entire Northlands. We will follow you to the end of the world if need be."
            }

            Message{
                speaker: "Eryssa"
                message: _ "Very good. Our first task is to give brave Tallin here full support in defeating these trolls."
            }

            Message{
                speaker: "Hidel"
                message: _ "With pleasure, Princess! Quickly men, set up a base!"
            }

            Terrain{
                x: 28, y: 15
                terrain: "Ke"
            }

            Terrain{
                x: {28, 28, 29, 27, 27}
                y: {14, 16, 16, 16, 15}
                terrain: "Ce"
            }

            Message{
                speaker: "Oof"
                message: _ "Oh no! Those blasted elves have just joined forces with the humans! This is hopeless! Flee! Flee!"
            }

            Message{
                speaker: "Tallin"
                message: _ "Hmmm, should we let the trolls run away or should we finish them now?"
                option: {
                    label: _ "Hey! Stand your ground, you cowards!"
                    command: ->
                        Message{
                            speaker: "Bor"
                            message: _ "You are a fool, human! We shall crush and destroy you!"
                        }
                        Objectives{
                            side: 6
                            objective: {
                                description: _ "Help Tallin defeat the enemy leaders"
                                condition: "win"
                            }
                            objective: {
                                description: _ "Death of Tallin"
                                condition: "lose"
                            }
                            objective: {
                                description: _ "Death of Ro’Arthian"
                                condition: "lose"
                            }
                            objective: {
                                description: _ "Death of Ro’Sothian"
                                condition: "lose"
                            }

                            <TURNS_RUN_OUT!

                            gold_carryover: {
                                carryover_percentage: 40
                            }
                        }
                    
                }
                option: {
                    label: _ "Haha! Look at them run!"
                    command: ->
                        Endlevel{
                            result: "victory"
                            bonus: true
                            <NEW_GOLD_CARRYOVER(40)
                        }
                    
                }
            }
    }

    event: {
        name: "turn 18"
        filter_condition: {
            variable: {
                name: "eryssa_hostile"
                equals: true
            }
        }
        do: ->
            Move_Unit_Fake{
                type: "Elvish Outrider"
                side: 6
                x: {30, 29, 28}
                y: {15, 15, 15}
            }

            Unit{
                id: "Himadrin"
                type: "Elvish Outrider"
                name: _ "Himadrin"
                x: 28, y: 15
                side: 6
            }

            Message{
                speaker: "Himadrin"
                message: _ "Which one of you rabble is Tallin?"
            }

            Message{
                speaker: "Tallin"
                message: _ "I am."
            }

            Message{
                speaker: "Himadrin"
                message: _ "Princess Eryssa sends you this gold along with the order to stay clear of any Northern Elf if you know what’s good for you."
            }

            Message{
                speaker: "Tallin"
                message: _ "Why? What did I ever do to the Northern Elves?"
            }

            Message{
                speaker: "Himadrin"
                message: _ "The ill treatment that she received while in your care is an insult to every Northern Elf. Consequently if you, or any of your henchmen show your face around us ever again, you will be shot on sight."
            }

            Gold{
                amount: 1500
                side: 1
            }

            Message{
                speaker: "Tallin"
                message: _ "Tell the princess to get off her high horse and stop acting like such a priss!"
            }

            Message{
                speaker: "Himadrin"
                message: _ "You dare insult our princess!"
            }

            Message{
                speaker: "Ro'Arthian"
                message: _ "You better get lost, elf, before we kill you."
            }

            Message{
                speaker: "Himadrin"
                message: _ "This insult will forever be remembered by the Northern Elves! The day will soon come when your race shall regret your folly!"
            }

            Kill{
                id: "Himadrin"
            }

            Move_Unit_Fake{
                type: "Elvish Outrider"
                side: 6
                x: {28, 29, 30}
                y: {15, 15, 15}
            }

            Message{
                speaker: "Camerin"
-- wmllint: local spelling Pff,
                message: _ "Pff, elves. What a bunch of stuck-up snots!"
            }

            Message{
                speaker: "Oof"
                message: _ "Oh no! The elves have just given the humans a hoard of gold! This is hopeless! Flee! Flee!"
            }

            Message{
                speaker: "Tallin"
                message: _ "Hmmm, should we let the trolls run away or should we finish them now?"
                option: {
                    label: _ "Hey! Stand your ground, you cowards!"
                    command: ->
                        Message{
                            speaker: "Bor"
                            message: _ "You are a fool, human! Watch how we will crush and destroy you!"
                        }

                        Objectives{
                            side: 1
                            objective: {
                                description: _ "Defeat the enemy leaders"
                                condition: "win"
                            }
                            objective: {
                                description: _ "Death of Tallin"
                                condition: "lose"
                            }
                            objective: {
                                description: _ "Death of Ro’Arthian"
                                condition: "lose"
                            }
                            objective: {
                                description: _ "Death of Ro’Sothian"
                                condition: "lose"
                            }

                            <TURNS_RUN_OUT!

                            gold_carryover: {
                                bonus: true
                                carryover_percentage: 40
                            }
                        }
                    
                }
                option: {
                    label: _ "Haha! Look at them run!"
                    command: ->
                        Endlevel{
                            result: "victory"
                            bonus: true
                            <NEW_GOLD_CARRYOVER(40)
                        }
                    
                }
            }
    }

-- Victory, Eryssa is allied
    event: {
        name: "victory"
        filter_condition: {
            have_unit: {
                id: "Eryssa"
            }
        }
        do: ->
            If{
                variable: {
                    name: "turn_number"
                    greater_than: 17
                }
                then: ->
                    Message{
                        speaker: "Tallin"
                        message: _ "Phew, they are defeated at last."
                    }

                    Message{
                        speaker: "Eryssa"
                        message: _ "Hidel, let me introduce to you my savior: Tallin."
                    }

                    Message{
                        speaker: "Hidel"
                        message: _ "It is an honor to meet you, Tallin."
                    }

                    Message{
                        speaker: "Tallin"
                        message: _ "The honor is mine, sir."
                    }

                    Message{
                        speaker: "Hidel"
                        message: _ "We have heard much of your intelligence and courage. The number of humans over the centuries who have earned the respect and admiration of the Northern Elves are extremely few, but let it be known that you are one of them."
                    }

                    Message{
                        speaker: "Tallin"
                        message: _ "I am honored, sir, and I hope that I will live up to the trust that the Northern Elves have bestowed upon me."
                    }

                    Message{
                        speaker: "Hidel"
                        message: _ "I am sure you will, Tallin. The trust of the elves is seldom misplaced."
                    }

                    Message{
                        speaker: "Ro'Arthian"
                        message: _ "If you guys are quite finished exchanging pleasantries..."
                    }

                    Message{
                        speaker: "Ro'Sothian"
                        message: _ "(<i>Snicker</i>)"
                    }

                    Message{
                        speaker: "Ro'Arthian"
                        message: _ "... the road ahead is clear and I am eager to blast some more orcs. Shall we proceed?"
                    }

                    Message{
                        speaker: "Tallin"
                        message: _ "Right. Onward men!"
                    }
                
                else: ->
                    Move_Unit_Fake{
                        type: "Elvish Marshal"
                        side: 6
                        x: {30, 29, 28}
                        y: {15, 15, 15}
                    }

                    Unit{
                        id: "Hidel"
                        type: "Elvish Marshal"
                        profile: "portraits/Hidel.png"
                        name: _ "Hidel"
                        x: 28, y: 15
                        side: 6
                        canrecruit: true
                    }

                    Move_Unit_Fake{
                        type: "Elvish Avenger"
                        side: 6
                        x: {30, 29, 28}
                        y: {14, 14, 14}
                    }

                    Unit{
                        type: "Elvish Avenger"
                        x: 28, y: 14
                        side: 6
                        id: "Sisal"
                        name: _ "Sisal"
                    }

                    Move_Unit_Fake{
                        type: "Elvish Fighter"
                        side: 6
                        x: {30, 29, 28}
                        y: {13, 13, 13}
                    }

                    GENERIC_UNIT(6, "Elvish Fighter", 28, 13)

                    Move_Unit_Fake{
                        type: "Elvish Archer"
                        side: 6
                        x: {30, 29, 28}
                        y: {16, 16, 16}
                    }

                    GENERIC_UNIT(6, "Elvish Archer", 28, 16)

                    Move_Unit_Fake{
                        type: "Elvish Shaman"
                        side: 6
                        x: {30, 29}
                        y: {15, 16}
                    }

                    GENERIC_UNIT(6, "Elvish Shaman", 29, 16)

                    Message{
                        speaker: "Hidel"
                        message: _ "Princess! We have finally found you! Thank the Bright Gods you are free! Your father had originally sent us to rescue you."
                    }

                    Message{
                        speaker: "Eryssa"
                        message: _ "Yes, or so I have heard. You honor me, but this brave man reached the mark before you."
                    }

                    Message{
                        speaker: "Hidel"
                        message: _ "You must be the famous Tallin."
                    }

                    Message{
                        speaker: "Tallin"
                        message: _ "At your service."
                    }

                    Message{
                        speaker: "Hidel"
                        message: _ "We have heard much of your intelligence and courage. The number of humans over the centuries who have earned the respect and admiration of the Northern Elves are extremely few, but you are one of them."
                    }

                    Message{
                        speaker: "Tallin"
                        message: _ "I am honored, sir, and I hope that I will live up to the trust that the Northern Elves have bestowed upon me."
                    }

                    Message{
                        speaker: "Hidel"
                        message: _ "I am sure you will, Tallin. The trust of the elves is seldom misplaced. Also know that the Northern Enclaves will always be open to you."
                    }

                    Message{
                        speaker: "Tallin"
                        message: _ "Thank you, sir."
                    }

                    Message{
                        speaker: "Eryssa"
                        message: _ "What is the status of our troops, Hidel?"
                    }

                    Message{
                        speaker: "Hidel"
                        message: _ "They are all here, princess! Hand picked by your father — the finest and bravest elvish troops in the entire Northlands."
                    }

                    Message{
                        speaker: "Eryssa"
                        message: _ "Excellent! We shall assist Tallin to the fullest in crushing the orcish host. Not only are we in debt to him but by doing so we will be serving our cause as well as we serve his."
                    }

                    Message{
                        speaker: "Hidel"
                        message: _ "As you wish, princess."
                    }

                    Message{
                        speaker: "Tallin"
                        message: _ "Very well, people. The road ahead is clear, onward to victory!"
                    }
                
            }
    }

-- Victory, Eryssa is hostile
    event: {
        name: "victory"
        filter_condition: {
            variable: {
                name: "eryssa_hostile"
                boolean_equals: true
            }
            variable: {
                name: "turn_number"
                less_than: 18
            }
        }
        do: ->
            Move_Unit_Fake{
                type: "Elvish Outrider"
                side: 6
                x: {30, 29, 28}
                y: {15, 15, 15}
            }

            Unit{
                id: "Himadrin"
                type: "Elvish Outrider"
                name: _ "Himadrin"
                x: 28, y: 15
                side: 6
            }

            Message{
                speaker: "Himadrin"
                message: _ "Which one of you rabble is Tallin?"
            }

            Message{
                speaker: "Tallin"
                message: _ "I am."
            }

            Message{
                speaker: "Himadrin"
                message: _ "Princess Eryssa sends you this gold along with the order to stay clear of any Northern Elf if you know what’s good for you."
            }

            Message{
                speaker: "Tallin"
                message: _ "Why? What did I ever do to the Northern Elves?"
            }

            Message{
                speaker: "Himadrin"
                message: _ "The ill treatment that she received while in your care is an insult to every Northern Elf. Consequently if you, or any of your henchmen show your face around us ever again, you will be shot on sight."
            }

            Gold{
                amount: 1500
                side: 1
            }

            Message{
                speaker: "Tallin"
                message: _ "Tell the princess to get off her high horse and stop acting like such a priss!"
            }

            Message{
                speaker: "Himadrin"
                message: _ "You dare insult our princess!"
            }

            Message{
                speaker: "Ro'Arthian"
                message: _ "You better get lost, elf, before we kill you."
            }

            Message{
                speaker: "Himadrin"
                message: _ "This insult will forever be remembered by the Northern Elves! The day will soon come when your race shall regret your folly!"
            }

            Kill{
                id: "Himadrin"
            }

            Move_Unit_Fake{
                type: "Elvish Outrider"
                side: 6
                x: {28, 29, 30}
                y: {15, 15, 15}
            }

            Message{
                speaker: "Camerin"
                message: _ "Pff, elves. What a bunch of stuck-up snots!"
            }
    }

-- Load death events
    <HERODEATH_EVERYONE!
}
