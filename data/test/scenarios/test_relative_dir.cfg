{GENERIC_UNIT_TEST "test_relative_dir" (
    [event]
        name=moveto
        first_time_only=no

        {VARIABLE mode $unit.side}
        {VARIABLE_OP mode sub 1}

        [chat]
            message = "mode = " $mode
        [/chat]

        {VARIABLE x 0}
        [while]
            {VARIABLE_CONDITIONAL x less_than 17}
            [do]
                {VARIABLE y 0}
                [while]
                    {VARIABLE_CONDITIONAL y less_than 10}
                    [do]
                        [store_relative_dir]
                            variable=temp
                            [source]
                                x=$x1
                                y=$y1
                            [/source]
                            [destination]
                                x=$x
                                y=$y
                            [/destination]
                            mode=$mode
                        [/store_relative_dir]
                        [label]
                            x=$x
                            y=$y
                            text=$temp
                        [/label]
                        {VARIABLE_OP y add 1}
                    [/do]
                [/while]
                {VARIABLE_OP x add 1}
            [/do]
        [/while]
    [/event]
)}
