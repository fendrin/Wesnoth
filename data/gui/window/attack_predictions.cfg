#textdomain wesnoth-lib
###
### Definition of the window to display various possible attack results
###

#define _GUI_SPACER_ROW
	[row]
		grow_factor = 0

		[column]
			#border = "all"
			#border_size = 5

			[spacer]
				height = 15
			[/spacer]
		[/column]

	[/row]
#enddef

#define _GUI_DATA_PANEL _ID_PREFIX
	[grid]

		[row]

			[column]
				grow_factor = 1
				horizontal_alignment = "left"
				vertical_grow = true

				[grid]

					[row]

						[column]
							border = "left,right,top"
							border_size = 5
							horizontal_alignment = "left"

							[label]
								label = _ "Base damage"
								definition = "default_small"
								linked_group = "header"
							[/label]
						[/column]

					[/row]

					[row]

						[column]
							border = "left,right,top"
							border_size = 5
							horizontal_alignment = "left"

							[label]
								#label = _ "Opponent resistance against"
								label = _ "Modifiers"
								definition = "default_small"
								linked_group = "header"
							[/label]
						[/column]

					[/row]

					{_GUI_SPACER_ROW}

					[row]

						[column]
							border = "left,right,top"
							border_size = 5
							horizontal_alignment = "left"

							[label]
								label = _ "Total damage"
								definition = "default_small"
								linked_group = "header"
							[/label]
						[/column]

					[/row]

					[row]

						[column]
							border = "left,right,top"
							border_size = 5
							horizontal_alignment = "left"

							[label]
								label = _ "Chance of being unscathed"
								definition = "default_small"
								linked_group = "header"
							[/label]
						[/column]

					[/row]

				[/grid]

			[/column]

			[column]
				grow_factor = 0
				horizontal_grow = true
				vertical_grow = true

				[grid]

					[row]

						[column]
							border = "left,right,top"
							border_size = 5
							horizontal_alignment = "left"

							[label]
								id = {_ID_PREFIX} + "_attack"
								definition = "default_small"
								linked_group = "header"

								use_markup = "true"
							[/label]
						[/column]

					[/row]

					[row]

						[column]
							border = "left,right,top"
							border_size = 5
							horizontal_alignment = "left"

							[label]
								id = {_ID_PREFIX} + "_resis"
								definition = "default_small"
								linked_group = "header"

								use_markup = "true"
							[/label]
						[/column]

					[/row]

					{_GUI_SPACER_ROW}

					[row]

						[column]
							border = "left,right,top"
							border_size = 5
							horizontal_alignment = "left"

							[label]
								id = {_ID_PREFIX} + "_damage"
								definition = "default_small"
								linked_group = "header"

								use_markup = "true"
							[/label]
						[/column]

					[/row]

					[row]

						[column]
							border = "left,right,top"
							border_size = 5
							horizontal_alignment = "left"

							[label]
								id = {_ID_PREFIX} + "_no_damage_chance"
								definition = "default_small"
								linked_group = "header"

								use_markup = "true"
							[/label]
						[/column]

					[/row]

				[/grid]

			[/column]

		[/row]

	[/grid]
#enddef

#define _GUI_HP_GRAPH _ID_PREFIX
	[drawing]
		id = {_ID_PREFIX} + "_hp_graph"
		definition = "default"

		width = 270
		height = 170

		[draw]

			[rectangle]
				x = 0
				y = 0
				w = "(width)"
				h = "(height)"
				fill_color = {GUI__BACKGROUND_COLOR_DISABLED}
				border_thickness = 2
				border_color = {GUI__FONT_COLOR_DISABLED__DEFAULT}
			[/rectangle]

			[rectangle]
				x = "(hp_column_width)"
				y = 0
				w = 2
				h = "(height - 2)"
				fill_color = {GUI__FONT_COLOR_DISABLED__DEFAULT}
			[/rectangle]

			[rectangle]
				x = "(width - chance_column_width - 2)"
				y = 0
				w = 2
				h = "(height - 2)"
				fill_color = {GUI__FONT_COLOR_DISABLED__DEFAULT}
			[/rectangle]

		[/draw]

	[/drawing]
#enddef

#define _GUI_DATA_COLUMN _HEADER _ID_PREFIX
	[grid]
		linked_group = "main_column"

		[row]

			[column]
				border = "all"
				border_size = 5
				horizontal_alignment = "center"

				[label]
					label = {_HEADER}
					definition = "default_large"
					linked_group = "header"
				[/label]
			[/column]

		[/row]

		[row]

			[column]
				horizontal_grow = true

				{_GUI_DATA_PANEL ({_ID_PREFIX})}
			[/column]

		[/row]

		{_GUI_SPACER_ROW}

		[row]

			[column]
				grow_factor = 1
				border = "all"
				border_size = 5
				horizontal_alignment = "center"

				[label]
					definition = "default_small"
					label = _ "Expected Battle Result (HP)"
				[/label]
			[/column]

		[/row]

		[row]

			[column]
				grow_factor = 1
				border = "all"
				border_size = 5
				horizontal_alignment = "center"

				{_GUI_HP_GRAPH ({_ID_PREFIX})}
			[/column]

		[/row]

	[/grid]
#enddef

[window]
	id = "attack_predictions"
	description = "Statistics dialog."

	[resolution]
		definition = "default"

		automatic_placement = "true"
		vertical_placement = "center"
		horizontal_placement = "center"

		#maximum_height = 400

		[linked_group]
			id = "main_column"
			fixed_width = "true"
		[/linked_group]

		[linked_group]
			id = "header"
			fixed_height = "true"
		[/linked_group]

		[linked_group]
			id = "attack"
			fixed_height = "true"
		[/linked_group]

		[linked_group]
			id = "resis"
			fixed_height = "true"
		[/linked_group]

		[linked_group]
			id = "damage"
			fixed_height = "true"
		[/linked_group]

		[linked_group]
			id = "chance_unscathed"
			fixed_height = "true"
		[/linked_group]

		[linked_group]
			id = "bonuses"
			fixed_height = "true"
		[/linked_group]

		[tooltip]
			id = "tooltip"
		[/tooltip]

		[helptip]
			id = "tooltip"
		[/helptip]

		[grid]

			[row]

				[column]
					grow_factor = 1

					border = "all"
					border_size = 5
					horizontal_alignment = "left"

					[label]
						id = "title"
						definition = "title"

						label = _ "Damage Calculations"
					[/label]

				[/column]

			[/row]

			[row]
				grow_factor = 0

				[column]
					horizontal_grow = "true"
					vertical_grow = "true"

					[grid]

						[row]

							[column]
								grow_factor = 1
								horizontal_grow = true
								vertical_grow = true

								{_GUI_DATA_COLUMN ( _ "Attacker") ("attacker")}
							[/column]

							{GUI_VERTICAL_SPACER_LINE}

							[column]
								grow_factor = 1
								horizontal_grow = true
								vertical_grow = true

								{_GUI_DATA_COLUMN ( _ "Defender") ("defender")}
							[/column]

						[/row]

					[/grid]

				[/column]

			[/row]


			[row]
				grow_factor = 0

				[column]
					border = "all"
					border_size = 5
					horizontal_alignment = "right"

					[button]
						id = "cancel"
						label = _ "Close"
					[/button]

				[/column]

			[/row]

		[/grid]

	[/resolution]

[/window]

#undef _GUI_DATA_COLUMN
#undef _GUI_HP_GRAPH
#undef _GUI_DATA_PANEL
#undef _GUI_SPACER_ROW
